{"ast":null,"code":"export default {\n  props: ['kbId'],\n  data() {\n    return {\n      fileList: []\n    };\n  },\n  methods: {\n    async handleUpload(file) {\n      const formData = new FormData();\n      formData.append('file', file.file);\n      try {\n        const response = await this.$axios.post(`/upload?kb_id=${this.kbId}`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Authorization': `Bearer ${this.$store.state.token}`\n          }\n        });\n        this.$message.success(`上传成功: ${file.file.name}`);\n        this.$emit('uploaded', response.data.filename);\n      } catch (error) {\n        this.$message.error(`上传失败: ${error.response?.data?.detail || error.message}`);\n      }\n    }\n  }\n};","map":{"version":3,"names":["props","data","fileList","methods","handleUpload","file","formData","FormData","append","response","$axios","post","kbId","headers","$store","state","token","$message","success","name","$emit","filename","error","detail","message"],"sources":["src/components/FileUpload.vue"],"sourcesContent":["<template>\r\n  <div class=\"file-upload\">\r\n    <el-upload\r\n      action=\"#\"\r\n      :multiple=\"true\"\r\n      :show-file-list=\"true\"\r\n      :http-request=\"handleUpload\"\r\n      :file-list=\"fileList\">\r\n      <el-button size=\"small\" type=\"primary\">选择文件</el-button>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">支持PDF、TXT、DOCX格式</div>\r\n    </el-upload>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['kbId'],\r\n  data() {\r\n    return {\r\n      fileList: []\r\n    }\r\n  },\r\n  methods: {\r\n    async handleUpload(file) {\r\n      const formData = new FormData()\r\n      formData.append('file', file.file)\r\n      \r\n      try {\r\n        const response = await this.$axios.post(`/upload?kb_id=${this.kbId}`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            'Authorization': `Bearer ${this.$store.state.token}`\r\n          }\r\n        })\r\n        \r\n        this.$message.success(`上传成功: ${file.file.name}`)\r\n        this.$emit('uploaded', response.data.filename)\r\n      } catch (error) {\r\n        this.$message.error(`上传失败: ${error.response?.data?.detail || error.message}`)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":"AAeA;EACAA,KAAA;EACAC,KAAA;IACA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,aAAAC,IAAA;MACA,MAAAC,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,SAAAH,IAAA,CAAAA,IAAA;MAEA;QACA,MAAAI,QAAA,cAAAC,MAAA,CAAAC,IAAA,uBAAAC,IAAA,IAAAN,QAAA;UACAO,OAAA;YACA;YACA,gCAAAC,MAAA,CAAAC,KAAA,CAAAC,KAAA;UACA;QACA;QAEA,KAAAC,QAAA,CAAAC,OAAA,UAAAb,IAAA,CAAAA,IAAA,CAAAc,IAAA;QACA,KAAAC,KAAA,aAAAX,QAAA,CAAAR,IAAA,CAAAoB,QAAA;MACA,SAAAC,KAAA;QACA,KAAAL,QAAA,CAAAK,KAAA,UAAAA,KAAA,CAAAb,QAAA,EAAAR,IAAA,EAAAsB,MAAA,IAAAD,KAAA,CAAAE,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}