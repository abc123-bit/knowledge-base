{"ast":null,"code":"import FileUpload from '@/components/FileUpload.vue';\nimport ChatBox from '@/components/ChatBox.vue';\nexport default {\n  components: {\n    FileUpload,\n    ChatBox\n  },\n  data() {\n    return {\n      kbs: [],\n      currentKb: null\n    };\n  },\n  async created() {\n    await this.fetchKBs();\n    if (this.kbs.length > 0) {\n      this.currentKb = this.kbs[0];\n    }\n  },\n  methods: {\n    async fetchKBs() {\n      try {\n        const response = await this.$axios.get('/knowledge/list', {\n          headers: {\n            'Authorization': `Bearer ${this.$store.state.token}`\n          }\n        });\n        this.kbs = response.data;\n      } catch (error) {\n        this.$message.error('获取知识库失败');\n      }\n    },\n    async createKB() {\n      const name = prompt('请输入知识库名称:');\n      if (name) {\n        try {\n          const response = await this.$axios.post('/knowledge/create', {\n            name\n          }, {\n            headers: {\n              'Authorization': `Bearer ${this.$store.state.token}`\n            }\n          });\n          this.kbs.push(response.data);\n          this.currentKb = response.data;\n        } catch (error) {\n          this.$message.error('创建知识库失败');\n        }\n      }\n    },\n    onUploaded() {\n      this.$message.success('文件处理完成！');\n    }\n  }\n};","map":{"version":3,"names":["FileUpload","ChatBox","components","data","kbs","currentKb","created","fetchKBs","length","methods","response","$axios","get","headers","$store","state","token","error","$message","createKB","name","prompt","post","push","onUploaded","success"],"sources":["src/views/KnowledgeBase.vue"],"sourcesContent":["<template>\r\n  <div class=\"knowledge-base\">\r\n    <h2>知识库管理</h2>\r\n    \r\n    <el-button type=\"primary\" @click=\"createKB\">创建知识库</el-button>\r\n    \r\n    <div v-if=\"currentKb\" class=\"kb-container\">\r\n      <h3>当前知识库: {{ currentKb.name }}</h3>\r\n      \r\n      <FileUpload :kb-id=\"currentKb.id\" @uploaded=\"onUploaded\"/>\r\n      \r\n      <div class=\"chat-container\">\r\n        <ChatBox :kb-id=\"currentKb.id\"/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FileUpload from '@/components/FileUpload.vue'\r\nimport ChatBox from '@/components/ChatBox.vue'\r\n\r\nexport default {\r\n  components: { FileUpload, ChatBox },\r\n  data() {\r\n    return {\r\n      kbs: [],\r\n      currentKb: null\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchKBs()\r\n    if (this.kbs.length > 0) {\r\n      this.currentKb = this.kbs[0]\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchKBs() {\r\n      try {\r\n        const response = await this.$axios.get('/knowledge/list', {\r\n          headers: {\r\n            'Authorization': `Bearer ${this.$store.state.token}`\r\n          }\r\n        })\r\n        this.kbs = response.data\r\n      } catch (error) {\r\n        this.$message.error('获取知识库失败')\r\n      }\r\n    },\r\n    async createKB() {\r\n      const name = prompt('请输入知识库名称:')\r\n      if (name) {\r\n        try {\r\n          const response = await this.$axios.post('/knowledge/create', { name }, {\r\n            headers: {\r\n              'Authorization': `Bearer ${this.$store.state.token}`\r\n            }\r\n          })\r\n          this.kbs.push(response.data)\r\n          this.currentKb = response.data\r\n        } catch (error) {\r\n          this.$message.error('创建知识库失败')\r\n        }\r\n      }\r\n    },\r\n    onUploaded() {\r\n      this.$message.success('文件处理完成！')\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":"AAmBA,OAAAA,UAAA;AACA,OAAAC,OAAA;AAEA;EACAC,UAAA;IAAAF,UAAA;IAAAC;EAAA;EACAE,KAAA;IACA;MACAC,GAAA;MACAC,SAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,WAAAC,QAAA;IACA,SAAAH,GAAA,CAAAI,MAAA;MACA,KAAAH,SAAA,QAAAD,GAAA;IACA;EACA;EACAK,OAAA;IACA,MAAAF,SAAA;MACA;QACA,MAAAG,QAAA,cAAAC,MAAA,CAAAC,GAAA;UACAC,OAAA;YACA,gCAAAC,MAAA,CAAAC,KAAA,CAAAC,KAAA;UACA;QACA;QACA,KAAAZ,GAAA,GAAAM,QAAA,CAAAP,IAAA;MACA,SAAAc,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACA,MAAAE,SAAA;MACA,MAAAC,IAAA,GAAAC,MAAA;MACA,IAAAD,IAAA;QACA;UACA,MAAAV,QAAA,cAAAC,MAAA,CAAAW,IAAA;YAAAF;UAAA;YACAP,OAAA;cACA,gCAAAC,MAAA,CAAAC,KAAA,CAAAC,KAAA;YACA;UACA;UACA,KAAAZ,GAAA,CAAAmB,IAAA,CAAAb,QAAA,CAAAP,IAAA;UACA,KAAAE,SAAA,GAAAK,QAAA,CAAAP,IAAA;QACA,SAAAc,KAAA;UACA,KAAAC,QAAA,CAAAD,KAAA;QACA;MACA;IACA;IACAO,WAAA;MACA,KAAAN,QAAA,CAAAO,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}